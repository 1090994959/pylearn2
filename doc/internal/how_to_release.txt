.. _how_to_release:

==================================================
How to make a release
==================================================

Clone the code::

    ssh projects@pylearn.org
    hg clone hg/Theano Theano-0.X

Edit ``setup.py`` to contain the newest version number ::

    cd Theano-0.X
    vi setup.py     # Edit the MAJOR, MINOR, MICRO and SUFFIX

The homepage must link to the download URL, for PyPi to correctly get the
code.
Edit ``doc/index.txt`` to contain a link to what will be the download URL::

    vi doc/index.txt    # Edit the link to downloads/Theano-0.X.tar.gz

Tag the release. The syntax is something like the following::

    hg commit -m"setup.py modifications for 0.X release" setup.py
    hg tag 0.X
    hg push

Now change ``ISRELEASED`` in setup.py to ``True``.

Finally, use setuptools to register and upload the release::

    python setup.py register sdist bdist_egg upload

Change ``ISRELEASED`` back to ``False``. 

I wrote the above without actually running it. This needs to be
scrutinized when you are actually do a release.

